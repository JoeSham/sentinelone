{
  "version": 4,
  "terraform_version": "1.5.7",
  "serial": 21,
  "lineage": "13ce2dcf-ad10-7c6c-d2e2-03bcaab74fd5",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "google_project",
      "name": "project",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "auto_create_network": null,
            "billing_account": null,
            "effective_labels": {},
            "folder_id": null,
            "id": "projects/sentinelone-428814",
            "labels": {},
            "name": "SentinelOne",
            "number": "649161842630",
            "org_id": null,
            "project_id": "sentinelone-428814",
            "skip_delete": null,
            "terraform_labels": {}
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_bigquery_data_transfer_config",
      "name": "issues_load_to_tmp_query_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "data_refresh_window_days": 0,
            "data_source_id": "scheduled_query",
            "destination_dataset_id": "sentinelone",
            "disabled": false,
            "display_name": "sentinelone_issues_tmp_load",
            "email_preferences": [],
            "id": "projects/649161842630/locations/europe/transferConfigs/669e8efb-0000-205f-bf90-14223bc682a2",
            "location": "EU",
            "name": "projects/649161842630/locations/europe/transferConfigs/669e8efb-0000-205f-bf90-14223bc682a2",
            "notification_pubsub_topic": "",
            "params": {
              "query": "-- Example SQL to load data from Cloud Storage to a temporary table\n-- CREATE OR REPLACE TABLE sentinelone.tmp_issues AS\n-- SELECT *\n-- FROM\n--   EXTERNAL_QUERY(\n--     'sentinelone.tmp_issues',\n--     '''\n--     SELECT * FROM `my-bucket/path/to/issues_input.json`\n--     '''\n--   )\n\nLOAD DATA OVERWRITE `sentinelone-428814.sentinelone.tmp_sentinelone_issues`\n(fields STRING)\nFROM FILES (\n  format = 'JSON',\n  uris = ['gs://sentinelone_issues/issues.json']);\n",
              "write_disposition": "WRITE_TRUNCATE"
            },
            "project": "sentinelone-428814",
            "schedule": "every 1 hours from 00:10 to 00:00",
            "schedule_options": [],
            "sensitive_params": [],
            "service_account_name": "bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "google_bigquery_dataset.dataset",
            "google_service_account.bq-scheduled-query-sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_bigquery_data_transfer_config",
      "name": "issues_transform_upsert_query_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "data_refresh_window_days": 0,
            "data_source_id": "scheduled_query",
            "destination_dataset_id": "sentinelone",
            "disabled": false,
            "display_name": "sentinelone_issues_transform_upsert",
            "email_preferences": [],
            "id": "projects/649161842630/locations/europe/transferConfigs/669fffb3-0000-2870-afb2-582429c07590",
            "location": "EU",
            "name": "projects/649161842630/locations/europe/transferConfigs/669fffb3-0000-2870-afb2-582429c07590",
            "notification_pubsub_topic": "",
            "params": {
              "query": "MERGE `sentinelone-428814.sentinelone.sentinelone_issues` T\nUSING (\n  SELECT\n    PARSE_DATE('%Y-%m-%d', JSON_EXTRACT_SCALAR(t.fields, '$.dt')) AS date,\n    JSON_EXTRACT_SCALAR(t.fields, '$.expand') AS expand,\n    CAST(JSON_EXTRACT_SCALAR(t.fields, '$.id') AS NUMERIC) AS id,\n    JSON_EXTRACT_SCALAR(t.fields, '$.key') AS key,\n    JSON_EXTRACT_SCALAR(t.fields, '$.self') AS self,\n    SPLIT(JSON_EXTRACT_SCALAR(t.fields, '$.key'), '-')[SAFE_OFFSET(0)] AS project,\n    JSON_EXTRACT_SCALAR(t.fields, '$.project.name') AS project_name,\n    JSON_EXTRACT_SCALAR(t.fields, '$.issuetype.name') AS issue_type_name,\n    JSON_EXTRACT_SCALAR(t.fields, '$.resolution.name') AS resolution_name,\n    JSON_EXTRACT_SCALAR(t.fields, '$.created') AS created_date,\n    JSON_EXTRACT_SCALAR(t.fields, '$.resolutiondate') AS resolved_date,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11169.value') AS severity,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11067.value') AS team,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11089.value') AS global_release,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_10026') AS story_points,\n    JSON_EXTRACT_SCALAR(t.fields, '$.priority') AS priority,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11191.value') AS bug_type,\n    JSON_EXTRACT_SCALAR(t.fields, '$.summary') AS summary,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11137') AS testing_scope,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11130.value') AS engineering_area,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11132') AS automation_test_name,\n    JSON_EXTRACT_SCALAR(t.fields, '$.status.name') AS status,\n    JSON_EXTRACT_SCALAR(t.fields, '$.reporter.displayName') AS reporter,\n    JSON_EXTRACT_SCALAR(t.fields, '$.assignee.displayName') AS assignee_name,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_10948') AS total_acv,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11087.value') AS program,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11104') AS execution_comments,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11079.value') AS display_in_big_picture,\n    JSON_EXTRACT_SCALAR(t.fields, '$.updated') AS updated,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11099.value') AS engineering_feedback,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_11118') AS proposed_text_for_limitation_or_resolved_issue,\n    JSON_EXTRACT_SCALAR(t.fields, '$.customfield_10002.requestType.name') AS customer_request_type,\n    JSON_EXTRACT_SCALAR(t.fields, '$.project.projectTypeKey') AS project_type,\n    JSON_EXTRACT_SCALAR(t.fields, '$.creator.displayName') AS channel\n  FROM\n    `sentinelone-428814.sentinelone.tmp_sentinelone_issues` t\n) S\nON T.id = S.id\nWHEN MATCHED THEN\n  UPDATE SET\n    T.date = S.date,\n    T.expand = S.expand,\n    T.key = S.key,\n    T.self = S.self,\n    T.project = S.project,\n    T.project_name = S.project_name,\n    T.issue_type_name = S.issue_type_name,\n    T.resolution_name = S.resolution_name,\n    T.created_date = S.created_date,\n    T.resolved_date = S.resolved_date,\n    T.severity = S.severity,\n    T.team = S.team,\n    T.global_release = S.global_release,\n    T.story_points = S.story_points,\n    T.priority = S.priority,\n    T.bug_type = S.bug_type,\n    T.summary = S.summary,\n    T.testing_scope = S.testing_scope,\n    T.engineering_area = S.engineering_area,\n    T.automation_test_name = S.automation_test_name,\n    T.status = S.status,\n    T.reporter = S.reporter,\n    T.assignee_name = S.assignee_name,\n    T.total_acv = S.total_acv,\n    T.program = S.program,\n    T.execution_comments = S.execution_comments,\n    T.display_in_big_picture = S.display_in_big_picture,\n    T.updated = S.updated,\n    T.engineering_feedback = S.engineering_feedback,\n    T.proposed_text_for_limitation_or_resolved_issue = S.proposed_text_for_limitation_or_resolved_issue,\n    T.customer_request_type = S.customer_request_type,\n    T.project_type = S.project_type,\n    T.channel = S.channel\nWHEN NOT MATCHED THEN\n  INSERT (\n    date, expand, id, key, self, project, project_name, issue_type_name, resolution_name,\n    created_date, resolved_date, severity, team, global_release, story_points, priority, bug_type,\n    summary, testing_scope, engineering_area, automation_test_name, status, reporter, assignee_name,\n    total_acv, program, execution_comments, display_in_big_picture, updated, engineering_feedback,\n    proposed_text_for_limitation_or_resolved_issue, customer_request_type, project_type, channel\n  ) VALUES (\n    S.date, S.expand, S.id, S.key, S.self, S.project, S.project_name, S.issue_type_name, S.resolution_name,\n    S.created_date, S.resolved_date, S.severity, S.team, S.global_release, S.story_points, S.priority, S.bug_type,\n    S.summary, S.testing_scope, S.engineering_area, S.automation_test_name, S.status, S.reporter, S.assignee_name,\n    S.total_acv, S.program, S.execution_comments, S.display_in_big_picture, S.updated, S.engineering_feedback,\n    S.proposed_text_for_limitation_or_resolved_issue, S.customer_request_type, S.project_type, S.channel\n  )\n",
              "write_disposition": "WRITE_APPEND"
            },
            "project": "sentinelone-428814",
            "schedule": "every 1 hours from 00:15 to 00:00",
            "schedule_options": [],
            "sensitive_params": [],
            "service_account_name": "bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "google_bigquery_dataset.dataset",
            "google_service_account.bq-scheduled-query-sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_bigquery_dataset",
      "name": "dataset",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access": [
              {
                "dataset": [],
                "domain": "",
                "group_by_email": "",
                "iam_member": "",
                "role": "OWNER",
                "routine": [],
                "special_group": "",
                "user_by_email": "josef.samanek@gmail.com",
                "view": []
              },
              {
                "dataset": [],
                "domain": "",
                "group_by_email": "",
                "iam_member": "",
                "role": "OWNER",
                "routine": [],
                "special_group": "projectOwners",
                "user_by_email": "",
                "view": []
              },
              {
                "dataset": [],
                "domain": "",
                "group_by_email": "",
                "iam_member": "",
                "role": "READER",
                "routine": [],
                "special_group": "projectReaders",
                "user_by_email": "",
                "view": []
              },
              {
                "dataset": [],
                "domain": "",
                "group_by_email": "",
                "iam_member": "",
                "role": "WRITER",
                "routine": [],
                "special_group": "projectWriters",
                "user_by_email": "",
                "view": []
              }
            ],
            "creation_time": 1720456619660,
            "dataset_id": "sentinelone",
            "default_collation": "",
            "default_encryption_configuration": [],
            "default_partition_expiration_ms": 0,
            "default_table_expiration_ms": 0,
            "delete_contents_on_destroy": false,
            "description": "",
            "effective_labels": {},
            "etag": "N8FaHGrqwpkrIQfFT5aI4A==",
            "external_dataset_reference": [],
            "friendly_name": "",
            "id": "projects/sentinelone-428814/datasets/sentinelone",
            "is_case_insensitive": false,
            "labels": {},
            "last_modified_time": 1720456619660,
            "location": "EU",
            "max_time_travel_hours": "",
            "project": "sentinelone-428814",
            "self_link": "https://bigquery.googleapis.com/bigquery/v2/projects/sentinelone-428814/datasets/sentinelone",
            "storage_billing_model": "",
            "terraform_labels": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_bigquery_table",
      "name": "sentinelone_issues",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "clustering": null,
            "creation_time": 1720456621280,
            "dataset_id": "sentinelone",
            "deletion_protection": true,
            "description": "",
            "effective_labels": {},
            "encryption_configuration": [],
            "etag": "jJvMJ6Lr5DVY7rnXAHSTnw==",
            "expiration_time": 0,
            "external_data_configuration": [],
            "friendly_name": "",
            "id": "projects/sentinelone-428814/datasets/sentinelone/tables/sentinelone_issues",
            "labels": {},
            "last_modified_time": 1720456621520,
            "location": "EU",
            "materialized_view": [],
            "max_staleness": "",
            "num_bytes": 0,
            "num_long_term_bytes": 0,
            "num_rows": 0,
            "project": "sentinelone-428814",
            "range_partitioning": [],
            "require_partition_filter": false,
            "schema": "[{\"mode\":\"NULLABLE\",\"name\":\"date\",\"type\":\"DATE\"},{\"mode\":\"NULLABLE\",\"name\":\"expand\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"id\",\"type\":\"NUMERIC\"},{\"mode\":\"NULLABLE\",\"name\":\"key\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"self\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"project\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"project_name\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"issue_type_name\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"resolution_name\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"created_date\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"resolved_date\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"severity\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"team\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"global_release\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"story_points\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"priority\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"bug_type\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"summary\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"testing_scope\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"engineering_area\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"automation_test_name\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"status\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"reporter\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"assignee_name\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"total_acv\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"program\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"execution_comments\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"display_in_big_picture\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"updated\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"engineering_feedback\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"proposed_text_for_limitation_or_resolved_issue\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"customer_request_type\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"project_type\",\"type\":\"STRING\"},{\"mode\":\"NULLABLE\",\"name\":\"channel\",\"type\":\"STRING\"}]",
            "self_link": "https://bigquery.googleapis.com/bigquery/v2/projects/sentinelone-428814/datasets/sentinelone/tables/sentinelone_issues",
            "table_constraints": [],
            "table_id": "sentinelone_issues",
            "table_replication_info": [],
            "terraform_labels": {},
            "time_partitioning": [],
            "type": "TABLE",
            "view": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_bigquery_dataset.dataset"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_bigquery_table",
      "name": "tmp_sentinelone_issues",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "clustering": null,
            "creation_time": 1720456621192,
            "dataset_id": "sentinelone",
            "deletion_protection": true,
            "description": "",
            "effective_labels": {},
            "encryption_configuration": [],
            "etag": "MRUG1ZtW89riNU6z29KNSw==",
            "expiration_time": 0,
            "external_data_configuration": [],
            "friendly_name": "",
            "id": "projects/sentinelone-428814/datasets/sentinelone/tables/tmp_sentinelone_issues",
            "labels": {},
            "last_modified_time": 1720456621413,
            "location": "EU",
            "materialized_view": [],
            "max_staleness": "",
            "num_bytes": 0,
            "num_long_term_bytes": 0,
            "num_rows": 0,
            "project": "sentinelone-428814",
            "range_partitioning": [],
            "require_partition_filter": false,
            "schema": "[{\"mode\":\"REQUIRED\",\"name\":\"fields\",\"type\":\"STRING\"}]",
            "self_link": "https://bigquery.googleapis.com/bigquery/v2/projects/sentinelone-428814/datasets/sentinelone/tables/tmp_sentinelone_issues",
            "table_constraints": [],
            "table_id": "tmp_sentinelone_issues",
            "table_replication_info": [],
            "terraform_labels": {},
            "time_partitioning": [],
            "type": "TABLE",
            "view": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_bigquery_dataset.dataset"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_project_iam_member",
      "name": "bq-scheduled-query-sa-iam",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwYcvzC+vMw=",
            "id": "sentinelone-428814/roles/bigquery.admin/serviceAccount:bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "member": "serviceAccount:bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "project": "sentinelone-428814",
            "role": "roles/bigquery.admin"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_service_account.bq-scheduled-query-sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_service_account",
      "name": "bq-scheduled-query-sa",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "bq-scheduled-query-sa",
            "create_ignore_already_exists": null,
            "description": "",
            "disabled": false,
            "display_name": "A service account to run bq scheduled queries",
            "email": "bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "id": "projects/sentinelone-428814/serviceAccounts/bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "member": "serviceAccount:bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "name": "projects/sentinelone-428814/serviceAccounts/bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "project": "sentinelone-428814",
            "timeouts": null,
            "unique_id": "114146206454232141532"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_storage_bucket_iam_member",
      "name": "sentinelone_issues_bucket_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "b/sentinelone_issues",
            "condition": [],
            "etag": "CAI=",
            "id": "b/sentinelone_issues/roles/storage.objectViewer/serviceAccount:bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "member": "serviceAccount:bq-scheduled-query-sa@sentinelone-428814.iam.gserviceaccount.com",
            "role": "roles/storage.objectViewer"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_service_account.bq-scheduled-query-sa"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
